shadow$provide.module$node_modules$rc_menu$lib$DOMWrap=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj$jscomp$0){_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};return _typeof(obj$jscomp$0)}function _toConsumableArray(arr){if(Array.isArray(arr)){var JSCompiler_temp=
0;for(var arr2=Array(arr.length);JSCompiler_temp<arr.length;JSCompiler_temp++)arr2[JSCompiler_temp]=arr[JSCompiler_temp];JSCompiler_temp=arr2}else JSCompiler_temp=void 0;JSCompiler_temp||(JSCompiler_temp=Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)?Array.from(arr):void 0);if(!(arr=JSCompiler_temp))throw new TypeError("Invalid attempt to spread non-iterable instance");return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=
Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach(function(key){var value=source[key];key in target?Object.defineProperty(target,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):target[key]=value}):
Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _objectWithoutProperties(source,excluded){if(null==source)return{};if(null==source)var target={};else{target={};var sourceKeys=Object.keys(source),i;for(i=0;i<sourceKeys.length;i++){var key=sourceKeys[i];0<=excluded.indexOf(key)||(target[key]=source[key])}}if(Object.getOwnPropertySymbols)for(i=
Object.getOwnPropertySymbols(source),key=0;key<i.length;key++)sourceKeys=i[key],0<=excluded.indexOf(sourceKeys)||Object.prototype.propertyIsEnumerable.call(source,sourceKeys)&&(target[sourceKeys]=source[sourceKeys]);return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}
function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!==typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o$jscomp$0){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o$jscomp$0)}
function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o$jscomp$0,
p$jscomp$0){_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return _setPrototypeOf(o$jscomp$0,p$jscomp$0)}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _react=_interopRequireDefault(require("module$node_modules$react$index")),_reactDom=_interopRequireDefault(require("module$node_modules$react_dom$index")),_resizeObserverPolyfill=_interopRequireDefault(require("module$node_modules$resize_observer_polyfill$dist$ResizeObserver")),_SubMenu=
_interopRequireDefault(require("module$node_modules$rc_menu$lib$SubMenu")),_util=require("module$node_modules$rc_menu$lib$util");"undefined"!==typeof window&&window.document&&window.document.createElement&&require("module$node_modules$mutationobserver_shim$dist$mutationobserver_min");global=function(_React$Component){function DOMWrap(){if(!(this instanceof DOMWrap))throw new TypeError("Cannot call a class as a function");var _this=_possibleConstructorReturn(this,_getPrototypeOf(DOMWrap).apply(this,
arguments));_this.resizeObserver=null;_this.mutationObserver=null;_this.originalTotalWidth=0;_this.overflowedItems=[];_this.menuItemSizes=[];_this.state={lastVisibleIndex:void 0};_this.getMenuItemNodes=function(){var prefixCls=_this.props.prefixCls,ul=_reactDom.default.findDOMNode(_assertThisInitialized(_this));return ul?[].slice.call(ul.children).filter(function(node){return 0>node.className.split(" ").indexOf("".concat(prefixCls,"-overflowed-submenu"))}):[]};_this.getOverflowedSubMenuItem=function(keyPrefix,
overflowedItems,renderPlaceholder){var _this$props=_this.props,overflowedIndicator=_this$props.overflowedIndicator,mode=_this$props.mode,prefixCls=_this$props.prefixCls,theme=_this$props.theme;if(1!==_this$props.level||"horizontal"!==mode)return null;_this$props=_this.props.children[0].props;mode=_this$props.style;var rest=_objectWithoutProperties(_this$props,["children","title","style"]);_this$props=_objectSpread({},mode);mode="".concat(keyPrefix,"-overflowed-indicator");keyPrefix="".concat(keyPrefix,
"-overflowed-indicator");0===overflowedItems.length&&!0!==renderPlaceholder?_this$props=_objectSpread({},_this$props,{display:"none"}):renderPlaceholder&&(_this$props=_objectSpread({},_this$props,{visibility:"hidden",position:"absolute"}),mode="".concat(mode,"-placeholder"),keyPrefix="".concat(keyPrefix,"-placeholder"));renderPlaceholder=theme?"".concat(prefixCls,"-").concat(theme):"";var props={};_util.menuAllProps.forEach(function(k){void 0!==rest[k]&&(props[k]=rest[k])});return _react.default.createElement(_SubMenu.default,
Object.assign({title:overflowedIndicator,className:"".concat(prefixCls,"-overflowed-submenu"),popupClassName:renderPlaceholder},props,{key:mode,eventKey:keyPrefix,disabled:!1,style:_this$props}),overflowedItems)};_this.setChildrenWidthAndResize=function(){if("horizontal"===_this.props.mode){var ul=_reactDom.default.findDOMNode(_assertThisInitialized(_this));if(ul){var ulChildrenNodes=ul.children;if(ulChildrenNodes&&0!==ulChildrenNodes.length){ulChildrenNodes=ul.children[ulChildrenNodes.length-1];
(0,_util.setStyle)(ulChildrenNodes,"display","inline-block");var menuItemNodes=_this.getMenuItemNodes(),overflowedItems=menuItemNodes.filter(function(c){return 0<=c.className.split(" ").indexOf("menuitem-overflowed")});overflowedItems.forEach(function(c){(0,_util.setStyle)(c,"display","inline-block")});_this.menuItemSizes=menuItemNodes.map(function(c){return(0,_util.getWidth)(c)});overflowedItems.forEach(function(c){(0,_util.setStyle)(c,"display","none")});_this.overflowedIndicatorWidth=(0,_util.getWidth)(ul.children[ul.children.length-
1]);_this.originalTotalWidth=_this.menuItemSizes.reduce(function(acc,cur){return acc+cur},0);_this.handleResize();(0,_util.setStyle)(ulChildrenNodes,"display","none")}}}};_this.handleResize=function(){if("horizontal"===_this.props.mode){var ul=_reactDom.default.findDOMNode(_assertThisInitialized(_this));if(ul){var width=(0,_util.getWidth)(ul);_this.overflowedItems=[];var currentSumWidth=0;if(_this.originalTotalWidth>width+.5){var lastVisibleIndex=-1;_this.menuItemSizes.forEach(function(liWidth){currentSumWidth+=
liWidth;currentSumWidth+_this.overflowedIndicatorWidth<=width&&(lastVisibleIndex+=1)})}_this.setState({lastVisibleIndex:lastVisibleIndex})}}};return _this}_inherits(DOMWrap,_React$Component);_createClass(DOMWrap,[{key:"componentDidMount",value:function(){var _this2=this;this.setChildrenWidthAndResize();if(1===this.props.level&&"horizontal"===this.props.mode){var menuUl=_reactDom.default.findDOMNode(this);menuUl&&(this.resizeObserver=new _resizeObserverPolyfill.default(function(entries){entries.forEach(_this2.setChildrenWidthAndResize)}),
[].slice.call(menuUl.children).concat(menuUl).forEach(function(el){_this2.resizeObserver.observe(el)}),"undefined"!==typeof MutationObserver&&(this.mutationObserver=new MutationObserver(function(){_this2.resizeObserver.disconnect();[].slice.call(menuUl.children).concat(menuUl).forEach(function(el){_this2.resizeObserver.observe(el)});_this2.setChildrenWidthAndResize()}),this.mutationObserver.observe(menuUl,{attributes:!1,childList:!0,subTree:!1})))}}},{key:"componentWillUnmount",value:function(){this.resizeObserver&&
this.resizeObserver.disconnect();this.mutationObserver&&this.resizeObserver.disconnect()}},{key:"renderChildren",value:function(children){var _this3=this,lastVisibleIndex=this.state.lastVisibleIndex;return(children||[]).reduce(function(acc,childNode,index){var item=childNode;if("horizontal"===_this3.props.mode){var overflowed=_this3.getOverflowedSubMenuItem(childNode.props.eventKey,[]);void 0!==lastVisibleIndex&&-1!==_this3.props.className.indexOf("".concat(_this3.props.prefixCls,"-root"))&&(index>
lastVisibleIndex&&(item=_react.default.cloneElement(childNode,{style:{display:"none"},eventKey:"".concat(childNode.props.eventKey,"-hidden"),className:"".concat("menuitem-overflowed")})),index===lastVisibleIndex+1&&(_this3.overflowedItems=children.slice(lastVisibleIndex+1).map(function(c){return _react.default.cloneElement(c,{key:c.props.eventKey,mode:"vertical-left"})}),overflowed=_this3.getOverflowedSubMenuItem(childNode.props.eventKey,_this3.overflowedItems)));acc=[].concat(_toConsumableArray(acc),
[overflowed,item]);index===children.length-1&&acc.push(_this3.getOverflowedSubMenuItem(childNode.props.eventKey,[],!0));return acc}return[].concat(_toConsumableArray(acc),[item])},[])}},{key:"render",value:function(){var _this$props2=this.props,hiddenClassName=_this$props2.hiddenClassName,visible=_this$props2.visible,tag=_this$props2.tag,children=_this$props2.children;_this$props2=_objectWithoutProperties(_this$props2,"hiddenClassName visible prefixCls overflowedIndicator mode level tag children theme".split(" "));
visible||(_this$props2.className+=" ".concat(hiddenClassName));return _react.default.createElement(tag,Object.assign({},_this$props2),this.renderChildren(children))}}]);return DOMWrap}(_react.default.Component);global.defaultProps={tag:"div",className:""};exports.default=global}
//# sourceMappingURL=module$node_modules$rc_menu$lib$DOMWrap.js.map
