{"version":3,"sources":["domino/ui/core.cljs"],"mappings":"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","names":["re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$2","p__37521","vec__37522","seq__37523","cljs.core/seq","first__37524","cljs.core/first","cljs.core/next","vec__37525","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","_","schema","initial-state","domino.core.initialize.cljs$core$IFn$_invoke$arity$2","or__4131__auto__","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","p__37528","vec__37529","views","id","view","domino.ui.view/render","p__37532","vec__37533","ctx","state","cljs.core.update_in.cljs$core$IFn$_invoke$arity$4","cljs.core/merge","G__37536","G__37537","re-frame.core/reg-sub","p__37538","vec__37539","cljs.core.get_in.cljs$core$IFn$_invoke$arity$2","G__37542","G__37543","G__37547","G__37548","G__37549","G__37550","G__37551","G__37552","G__37553","G__37554","G__37555","G__37556","p__37557","vec__37558","view-id","cljs.core.get.cljs$core$IFn$_invoke$arity$2","G__37561","G__37562","G__37563","G__37564","p__37565","vec__37566","path","p__37569","vec__37570","value","domino.core/transact","G__37573","G__37574","p__37575","vec__37576","p__37579","vec__37580","ids","domino.core/trigger-events"],"sourcesContent":["(ns domino.ui.core\n  (:require\n   [domino.core :as domino]\n   [domino.ui.view :as view]\n   [re-frame.core :as rf]))\n\n(rf/reg-event-db\n ::init\n (fn [_ [_ schema & [initial-state]]]\n   (-> (domino/initialize schema (or initial-state {}))\n       (assoc ::views (reduce \n                        (fn [views [id view]]\n                          (assoc views id (view/render view)))\n                        {} (:views schema))))))\n\n(rf/reg-event-db\n ::update-component-state\n (fn [ctx [_ id state]]\n   (update-in ctx [::components id] merge state)))\n\n(rf/reg-sub\n ::component\n (fn [ctx [_ id]]\n   (get-in ctx [::components id])))\n\n(rf/reg-sub\n ::components\n (fn [ctx _]\n   (::components ctx)))\n\n(rf/reg-sub\n ::ctx\n (fn [ctx _]\n   ctx))\n\n(rf/reg-sub\n ::model\n (fn [ctx _]\n   (::domino/model ctx)))\n\n(rf/reg-sub\n ::views\n (fn [ctx _]\n   (::views ctx)))\n\n(rf/reg-sub\n ::view\n :<- [::views]\n (fn [views [_ view-id]]\n   (get views view-id)))\n\n(rf/reg-sub\n ::db\n (fn [ctx _]\n   (::domino/db ctx)))\n\n(rf/reg-sub\n ::path\n (fn [ctx [_ path]]\n   (get-in (::domino/db ctx) path)))\n\n(rf/reg-event-db\n ::id\n (fn [ctx [_ id value]]\n   (domino/transact ctx [[(get-in (::domino/model ctx) [:id->path id]) value]])))\n\n(rf/reg-sub\n ::id\n (fn [ctx [_ id]]\n   (get-in (::domino/db ctx) (get-in (::domino/model ctx) [:id->path id]))))\n\n(rf/reg-event-db\n ::trigger\n (fn [ctx [_ ids]]\n   (domino/trigger-events ctx ids)))"]}