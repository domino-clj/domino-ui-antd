shadow$provide.module$node_modules$rc_trigger$lib$Popup=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;global=require("module$node_modules$babel_runtime$helpers$extends");var _extends3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$classCallCheck");var _classCallCheck3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$possibleConstructorReturn");
var _possibleConstructorReturn3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$inherits");var _inherits3=_interopRequireDefault(global);global=require("module$node_modules$react$index");var _react2=_interopRequireDefault(global);process=require("module$node_modules$prop_types$index");process=_interopRequireDefault(process);shadow$shims=require("module$node_modules$react_dom$index");var _reactDom2=_interopRequireDefault(shadow$shims);shadow$shims=require("module$node_modules$rc_align$lib$index");
var _rcAlign2=_interopRequireDefault(shadow$shims);shadow$shims=require("module$node_modules$rc_animate$lib$Animate");var _rcAnimate2=_interopRequireDefault(shadow$shims);shadow$shims=require("module$node_modules$rc_trigger$lib$PopupInner");var _PopupInner2=_interopRequireDefault(shadow$shims);shadow$shims=require("module$node_modules$rc_trigger$lib$LazyRenderBox");var _LazyRenderBox2=_interopRequireDefault(shadow$shims),_utils=require("module$node_modules$rc_trigger$lib$utils");require=function(_Component){function Popup(props){(0,
_classCallCheck3["default"])(this,Popup);props=(0,_possibleConstructorReturn3["default"])(this,_Component.call(this,props));_initialiseProps.call(props);props.state={stretchChecked:!1,targetWidth:void 0,targetHeight:void 0};props.savePopupRef=_utils.saveRef.bind(props,"popupInstance");props.saveAlignRef=_utils.saveRef.bind(props,"alignInstance");return props}(0,_inherits3["default"])(Popup,_Component);Popup.prototype.componentDidMount=function(){this.rootNode=this.getPopupDomNode();this.setStretchSize()};
Popup.prototype.componentDidUpdate=function(){this.setStretchSize()};Popup.prototype.getPopupDomNode=function(){return _reactDom2["default"].findDOMNode(this.popupInstance)};Popup.prototype.getMaskTransitionName=function(){var props=this.props,transitionName=props.maskTransitionName,animation=props.maskAnimation;!transitionName&&animation&&(transitionName=props.prefixCls+"-"+animation);return transitionName};Popup.prototype.getTransitionName=function(){var props=this.props,transitionName=props.transitionName;
!transitionName&&props.animation&&(transitionName=props.prefixCls+"-"+props.animation);return transitionName};Popup.prototype.getClassName=function(currentAlignClassName){return this.props.prefixCls+" "+this.props.className+" "+currentAlignClassName};Popup.prototype.getPopupElement=function(){var _this2=this,savePopupRef=this.savePopupRef,_state=this.state,stretchChecked=_state.stretchChecked,targetHeight=_state.targetHeight,targetWidth=_state.targetWidth,_props=this.props;_state=_props.align;var visible=
_props.visible,prefixCls=_props.prefixCls,style=_props.style,getClassNameFromAlign=_props.getClassNameFromAlign,destroyPopupOnHide=_props.destroyPopupOnHide,stretch=_props.stretch,children=_props.children,onMouseEnter=_props.onMouseEnter,onMouseLeave=_props.onMouseLeave,onMouseDown=_props.onMouseDown;_props=_props.onTouchStart;var className=this.getClassName(this.currentAlignClassName||getClassNameFromAlign(_state));getClassNameFromAlign=prefixCls+"-hidden";visible||(this.currentAlignClassName=null);
var sizeStyle={};stretch&&(-1!==stretch.indexOf("height")?sizeStyle.height=targetHeight:-1!==stretch.indexOf("minHeight")&&(sizeStyle.minHeight=targetHeight),-1!==stretch.indexOf("width")?sizeStyle.width=targetWidth:-1!==stretch.indexOf("minWidth")&&(sizeStyle.minWidth=targetWidth),stretchChecked||(sizeStyle.visibility="hidden",setTimeout(function(){_this2.alignInstance&&_this2.alignInstance.forceAlign()},0)));stretchChecked=(0,_extends3["default"])({},sizeStyle,style,this.getZIndexStyle());savePopupRef=
{className:className,prefixCls:prefixCls,ref:savePopupRef,onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave,onMouseDown:onMouseDown,onTouchStart:_props,style:stretchChecked};return destroyPopupOnHide?_react2["default"].createElement(_rcAnimate2["default"],{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName()},visible?_react2["default"].createElement(_rcAlign2["default"],{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,align:_state,
onAlign:this.onAlign},_react2["default"].createElement(_PopupInner2["default"],(0,_extends3["default"])({visible:!0},savePopupRef),children)):null):_react2["default"].createElement(_rcAnimate2["default"],{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),showProp:"xVisible"},_react2["default"].createElement(_rcAlign2["default"],{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,xVisible:visible,childrenProps:{visible:"xVisible"},
disabled:!visible,align:_state,onAlign:this.onAlign},_react2["default"].createElement(_PopupInner2["default"],(0,_extends3["default"])({hiddenClassName:getClassNameFromAlign},savePopupRef),children)))};Popup.prototype.getZIndexStyle=function(){var style={},props=this.props;void 0!==props.zIndex&&(style.zIndex=props.zIndex);return style};Popup.prototype.getMaskElement=function(){var props=this.props,maskElement=void 0;if(props.mask){var maskTransition=this.getMaskTransitionName();maskElement=_react2["default"].createElement(_LazyRenderBox2["default"],
{style:this.getZIndexStyle(),key:"mask",className:props.prefixCls+"-mask",hiddenClassName:props.prefixCls+"-mask-hidden",visible:props.visible});maskTransition&&(maskElement=_react2["default"].createElement(_rcAnimate2["default"],{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:maskTransition},maskElement))}return maskElement};Popup.prototype.render=function(){return _react2["default"].createElement("div",null,this.getMaskElement(),this.getPopupElement())};return Popup}(global.Component);
require.propTypes={visible:process["default"].bool,style:process["default"].object,getClassNameFromAlign:process["default"].func,onAlign:process["default"].func,getRootDomNode:process["default"].func,align:process["default"].any,destroyPopupOnHide:process["default"].bool,className:process["default"].string,prefixCls:process["default"].string,onMouseEnter:process["default"].func,onMouseLeave:process["default"].func,onMouseDown:process["default"].func,onTouchStart:process["default"].func,stretch:process["default"].string,
children:process["default"].node,point:process["default"].shape({pageX:process["default"].number,pageY:process["default"].number})};var _initialiseProps=function(){var _this3=this;this.onAlign=function(popupDomNode,align){var props=_this3.props,currentAlignClassName=props.getClassNameFromAlign(align);_this3.currentAlignClassName!==currentAlignClassName&&(_this3.currentAlignClassName=currentAlignClassName,popupDomNode.className=_this3.getClassName(currentAlignClassName));props.onAlign(popupDomNode,
align)};this.setStretchSize=function(){var _props2=_this3.props,getRootDomNode=_props2.getRootDomNode,visible=_props2.visible,_state2=_this3.state,stretchChecked=_state2.stretchChecked,targetHeight=_state2.targetHeight;_state2=_state2.targetWidth;if(_props2.stretch&&visible){if(getRootDomNode=getRootDomNode())_props2=getRootDomNode.offsetHeight,getRootDomNode=getRootDomNode.offsetWidth,targetHeight===_props2&&_state2===getRootDomNode&&stretchChecked||_this3.setState({stretchChecked:!0,targetHeight:_props2,
targetWidth:getRootDomNode})}else stretchChecked&&_this3.setState({stretchChecked:!1})};this.getTargetElement=function(){return _this3.props.getRootDomNode()};this.getAlignTarget=function(){var point=_this3.props.point;return point?point:_this3.getTargetElement}};exports["default"]=require;module.exports=exports["default"]}
//# sourceMappingURL=module$node_modules$rc_trigger$lib$Popup.js.map
