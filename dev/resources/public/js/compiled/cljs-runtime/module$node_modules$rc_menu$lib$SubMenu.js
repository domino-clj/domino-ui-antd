shadow$provide.module$node_modules$rc_menu$lib$SubMenu=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj$jscomp$0){_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};return _typeof(obj$jscomp$0)}function _defineProperties(target,
props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){return!call||"object"!==
_typeof(call)&&"function"!==typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o$jscomp$0){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o$jscomp$0)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o$jscomp$0,p$jscomp$0){_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return _setPrototypeOf(o$jscomp$0,p$jscomp$0)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&
(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach(function(key){Object.defineProperty(target,
key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=exports.SubMenu=void 0;var _react=_interopRequireDefault(require("module$node_modules$react$index")),_reactDom=_interopRequireDefault(require("module$node_modules$react_dom$index")),_rcTrigger=_interopRequireDefault(require("module$node_modules$rc_trigger$lib$index")),
_KeyCode=_interopRequireDefault(require("module$node_modules$rc_util$lib$KeyCode")),_rcAnimate=_interopRequireDefault(require("module$node_modules$rc_animate$lib$Animate")),_classnames=_interopRequireDefault(require("module$node_modules$classnames$index"));global=require("module$node_modules$mini_store$lib$index");var _SubPopupMenu=_interopRequireDefault(require("module$node_modules$rc_menu$lib$SubPopupMenu")),_placements=_interopRequireDefault(require("module$node_modules$rc_menu$lib$placements")),
_util=require("module$node_modules$rc_menu$lib$util"),guid=0,popupPlacementMap={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"},updateDefaultActiveFirst=function(store,eventKey,defaultActiveFirst){eventKey=(0,_util.getMenuIdFromSubMenuEventKey)(eventKey);var state=store.getState();store.setState({defaultActiveFirst:_objectSpread({},state.defaultActiveFirst,_defineProperty({},eventKey,defaultActiveFirst))})};require=function(_React$Component){function SubMenu(props$jscomp$0){if(!(this instanceof
SubMenu))throw new TypeError("Cannot call a class as a function");var _this=_possibleConstructorReturn(this,_getPrototypeOf(SubMenu).call(this,props$jscomp$0));_this.onDestroy=function(key){_this.props.onDestroy(key)};_this.onKeyDown=function(e){var keyCode=e.keyCode,menu=_this.menuInstance,_this$props=_this.props,isOpen=_this$props.isOpen;_this$props=_this$props.store;if(keyCode===_KeyCode.default.ENTER)return _this.onTitleClick(e),updateDefaultActiveFirst(_this$props,_this.props.eventKey,!0),!0;
if(keyCode===_KeyCode.default.RIGHT){if(isOpen)menu.onKeyDown(e);else _this.triggerOpenChange(!0),updateDefaultActiveFirst(_this$props,_this.props.eventKey,!0);return!0}if(keyCode===_KeyCode.default.LEFT){if(isOpen)e=menu.onKeyDown(e);else return;e||(_this.triggerOpenChange(!1),e=!0);return e}if(isOpen&&(keyCode===_KeyCode.default.UP||keyCode===_KeyCode.default.DOWN))return menu.onKeyDown(e)};_this.onOpenChange=function(e){_this.props.onOpenChange(e)};_this.onPopupVisibleChange=function(visible){_this.triggerOpenChange(visible,
visible?"mouseenter":"mouseleave")};_this.onMouseEnter=function(e){var _this$props2=_this.props,key=_this$props2.eventKey,onMouseEnter=_this$props2.onMouseEnter;updateDefaultActiveFirst(_this$props2.store,_this.props.eventKey,!1);onMouseEnter({key:key,domEvent:e})};_this.onMouseLeave=function(e){var _this$props3=_this.props,eventKey=_this$props3.eventKey,onMouseLeave=_this$props3.onMouseLeave;_this$props3.parentMenu.subMenuInstance=_assertThisInitialized(_this);onMouseLeave({key:eventKey,domEvent:e})};
_this.onTitleMouseEnter=function(domEvent){var _this$props4=_this.props,key=_this$props4.eventKey,onItemHover=_this$props4.onItemHover;_this$props4=_this$props4.onTitleMouseEnter;onItemHover({key:key,hover:!0});_this$props4({key:key,domEvent:domEvent})};_this.onTitleMouseLeave=function(e){var _this$props5=_this.props,eventKey=_this$props5.eventKey,onItemHover=_this$props5.onItemHover,onTitleMouseLeave=_this$props5.onTitleMouseLeave;_this$props5.parentMenu.subMenuInstance=_assertThisInitialized(_this);
onItemHover({key:eventKey,hover:!1});onTitleMouseLeave({key:eventKey,domEvent:e})};_this.onTitleClick=function(e){var props=_assertThisInitialized(_this).props;props.onTitleClick({key:props.eventKey,domEvent:e});"hover"!==props.triggerSubMenuAction&&(_this.triggerOpenChange(!props.isOpen,"click"),updateDefaultActiveFirst(props.store,_this.props.eventKey,!1))};_this.onSubMenuClick=function(info){if("function"===typeof _this.props.onClick)_this.props.onClick(_this.addKeyPath(info))};_this.onSelect=
function(info){_this.props.onSelect(info)};_this.onDeselect=function(info){_this.props.onDeselect(info)};_this.getPrefixCls=function(){return"".concat(_this.props.rootPrefixCls,"-submenu")};_this.getActiveClassName=function(){return"".concat(_this.getPrefixCls(),"-active")};_this.getDisabledClassName=function(){return"".concat(_this.getPrefixCls(),"-disabled")};_this.getSelectedClassName=function(){return"".concat(_this.getPrefixCls(),"-selected")};_this.getOpenClassName=function(){return"".concat(_this.props.rootPrefixCls,
"-submenu-open")};_this.saveMenuInstance=function(c){_this.menuInstance=c};_this.addKeyPath=function(info){return _objectSpread({},info,{keyPath:(info.keyPath||[]).concat(_this.props.eventKey)})};_this.triggerOpenChange=function(open,type){var key=_this.props.eventKey,openChange=function(){_this.onOpenChange({key:key,item:_assertThisInitialized(_this),trigger:type,open:open})};"mouseenter"===type?_this.mouseenterTimeout=setTimeout(function(){openChange()},0):openChange()};_this.isChildrenSelected=
function(){var ret={find:!1};(0,_util.loopMenuItemRecursively)(_this.props.children,_this.props.selectedKeys,ret);return ret.find};_this.isOpen=function(){return-1!==_this.props.openKeys.indexOf(_this.props.eventKey)};_this.adjustWidth=function(){if(_this.subMenuTitle&&_this.menuInstance){var popupMenu=_reactDom.default.findDOMNode(_this.menuInstance);popupMenu.offsetWidth>=_this.subMenuTitle.offsetWidth||(popupMenu.style.minWidth="".concat(_this.subMenuTitle.offsetWidth,"px"))}};_this.saveSubMenuTitle=
function(subMenuTitle){_this.subMenuTitle=subMenuTitle};var store=props$jscomp$0.store;props$jscomp$0=props$jscomp$0.eventKey;var defaultActiveFirst=store.getState().defaultActiveFirst,value=_this.isRootMenu=!1;defaultActiveFirst&&(value=defaultActiveFirst[props$jscomp$0]);updateDefaultActiveFirst(store,props$jscomp$0,value);return _this}_inherits(SubMenu,_React$Component);_createClass(SubMenu,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var _this2=
this,_this$props6=this.props,mode=_this$props6.mode,parentMenu=_this$props6.parentMenu;(_this$props6=_this$props6.manualRef)&&_this$props6(this);"horizontal"===mode&&parentMenu.isRootMenu&&this.props.isOpen&&(this.minWidthTimeout=setTimeout(function(){return _this2.adjustWidth()},0))}},{key:"componentWillUnmount",value:function(){var _this$props7=this.props,onDestroy=_this$props7.onDestroy;_this$props7=_this$props7.eventKey;onDestroy&&onDestroy(_this$props7);this.minWidthTimeout&&clearTimeout(this.minWidthTimeout);
this.mouseenterTimeout&&clearTimeout(this.mouseenterTimeout)}},{key:"renderChildren",value:function(children){var props=this.props;props={mode:"horizontal"===props.mode?"vertical":props.mode,visible:this.props.isOpen,level:props.level+1,inlineIndent:props.inlineIndent,focusable:!1,onClick:this.onSubMenuClick,onSelect:this.onSelect,onDeselect:this.onDeselect,onDestroy:this.onDestroy,selectedKeys:props.selectedKeys,eventKey:"".concat(props.eventKey,"-menu-"),openKeys:props.openKeys,openTransitionName:props.openTransitionName,
openAnimation:props.openAnimation,onOpenChange:this.onOpenChange,subMenuOpenDelay:props.subMenuOpenDelay,parentMenu:this,subMenuCloseDelay:props.subMenuCloseDelay,forceSubMenuRender:props.forceSubMenuRender,triggerSubMenuAction:props.triggerSubMenuAction,builtinPlacements:props.builtinPlacements,defaultActiveFirst:props.store.getState().defaultActiveFirst[(0,_util.getMenuIdFromSubMenuEventKey)(props.eventKey)],multiple:props.multiple,prefixCls:props.rootPrefixCls,id:this.internalMenuId,manualRef:this.saveMenuInstance,
itemIcon:props.itemIcon,expandIcon:props.expandIcon};var haveRendered=this.haveRendered;this.haveRendered=!0;this.haveOpened=this.haveOpened||props.visible||props.forceSubMenuRender;if(!this.haveOpened)return _react.default.createElement("div",null);haveRendered=haveRendered||!props.visible||"inline"!==props.mode;props.className=" ".concat(props.prefixCls,"-sub");var animProps={};props.openTransitionName?animProps.transitionName=props.openTransitionName:"object"===_typeof(props.openAnimation)&&(animProps.animation=
_objectSpread({},props.openAnimation),haveRendered||delete animProps.animation.appear);return _react.default.createElement(_rcAnimate.default,Object.assign({},animProps,{showProp:"visible",component:"",transitionAppear:haveRendered}),_react.default.createElement(_SubPopupMenu.default,Object.assign({},props,{id:this.internalMenuId}),children))}},{key:"render",value:function(){var _classNames,props=_objectSpread({},this.props),isOpen=props.isOpen,prefixCls=this.getPrefixCls(),isInlineMode="inline"===
props.mode,className=(0,_classnames.default)(prefixCls,"".concat(prefixCls,"-").concat(props.mode),(_classNames={},_defineProperty(_classNames,props.className,!!props.className),_defineProperty(_classNames,this.getOpenClassName(),isOpen),_defineProperty(_classNames,this.getActiveClassName(),props.active||isOpen&&!isInlineMode),_defineProperty(_classNames,this.getDisabledClassName(),props.disabled),_defineProperty(_classNames,this.getSelectedClassName(),this.isChildrenSelected()),_classNames));this.internalMenuId||
(props.eventKey?this.internalMenuId="".concat(props.eventKey,"$Menu"):(guid+=1,this.internalMenuId="$__$".concat(guid,"$Menu")));_classNames={};var titleClickEvents={},titleMouseEvents={};props.disabled||(_classNames={onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter},titleClickEvents={onClick:this.onTitleClick},titleMouseEvents={onMouseEnter:this.onTitleMouseEnter,onMouseLeave:this.onTitleMouseLeave});var style={};isInlineMode&&(style.paddingLeft=props.inlineIndent*props.level);var ariaOwns=
{};this.props.isOpen&&(ariaOwns={"aria-owns":this.internalMenuId});var icon=null;"horizontal"!==props.mode&&(icon=this.props.expandIcon,"function"===typeof this.props.expandIcon&&(icon=_react.default.createElement(this.props.expandIcon,_objectSpread({},this.props))));titleClickEvents=_react.default.createElement("div",Object.assign({ref:this.saveSubMenuTitle,style:style,className:"".concat(prefixCls,"-title")},titleMouseEvents,titleClickEvents,{"aria-expanded":isOpen},ariaOwns,{"aria-haspopup":"true",
title:"string"===typeof props.title?props.title:void 0}),props.title,icon||_react.default.createElement("i",{className:"".concat(prefixCls,"-arrow")}));titleMouseEvents=this.renderChildren(props.children);style=props.parentMenu.isRootMenu?props.parentMenu.props.getPopupContainer:function(triggerNode){return triggerNode.parentNode};ariaOwns=popupPlacementMap[props.mode];icon=props.popupOffset?{offset:props.popupOffset}:{};var popupClassName="inline"===props.mode?"":props.popupClassName,disabled=props.disabled,
triggerSubMenuAction=props.triggerSubMenuAction,subMenuOpenDelay=props.subMenuOpenDelay,forceSubMenuRender=props.forceSubMenuRender,subMenuCloseDelay=props.subMenuCloseDelay,builtinPlacements=props.builtinPlacements;_util.menuAllProps.forEach(function(key){return delete props[key]});delete props.onClick;return _react.default.createElement("li",Object.assign({},props,_classNames,{className:className,role:"menuitem"}),isInlineMode&&titleClickEvents,isInlineMode&&titleMouseEvents,!isInlineMode&&_react.default.createElement(_rcTrigger.default,
{prefixCls:prefixCls,popupClassName:"".concat(prefixCls,"-popup ").concat(popupClassName),getPopupContainer:style,builtinPlacements:Object.assign({},_placements.default,builtinPlacements),popupPlacement:ariaOwns,popupVisible:isOpen,popupAlign:icon,popup:titleMouseEvents,action:disabled?[]:[triggerSubMenuAction],mouseEnterDelay:subMenuOpenDelay,mouseLeaveDelay:subMenuCloseDelay,onPopupVisibleChange:this.onPopupVisibleChange,forceRender:forceSubMenuRender},titleClickEvents))}}]);return SubMenu}(_react.default.Component);
exports.SubMenu=require;require.defaultProps={onMouseEnter:_util.noop,onMouseLeave:_util.noop,onTitleMouseEnter:_util.noop,onTitleMouseLeave:_util.noop,onTitleClick:_util.noop,manualRef:_util.noop,mode:"vertical",title:""};require=(0,global.connect)(function(_ref,_ref2){var activeKey=_ref.activeKey,selectedKeys=_ref.selectedKeys,eventKey=_ref2.eventKey;_ref2=_ref2.subMenuKey;return{isOpen:-1<_ref.openKeys.indexOf(eventKey),active:activeKey[_ref2]===eventKey,selectedKeys:selectedKeys}})(require);require.isSubMenu=
!0;exports.default=require}
//# sourceMappingURL=module$node_modules$rc_menu$lib$SubMenu.js.map
