shadow$provide.module$node_modules$rc_animate$lib$Animate=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getChildrenFromProps(props){props=props.children;return _react2["default"].isValidElement(props)&&!props.key?_react2["default"].cloneElement(props,{key:defaultKey}):props}function noop(){}Object.defineProperty(exports,"__esModule",{value:!0});global=require("module$node_modules$babel_runtime$helpers$extends");
var _extends3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$defineProperty");var _defineProperty3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$classCallCheck");var _classCallCheck3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$createClass");var _createClass3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$possibleConstructorReturn");
var _possibleConstructorReturn3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$inherits");var _inherits3=_interopRequireDefault(global);global=require("module$node_modules$react$index");var _react2=_interopRequireDefault(global);global=require("module$node_modules$prop_types$index");global=_interopRequireDefault(global);process=require("module$node_modules$rc_util$lib$unsafeLifecyclesPolyfill");process=_interopRequireDefault(process);var _ChildrenUtils=require("module$node_modules$rc_animate$lib$ChildrenUtils");
shadow$shims=require("module$node_modules$rc_animate$lib$AnimateChild");var _AnimateChild2=_interopRequireDefault(shadow$shims);require=require("module$node_modules$rc_animate$lib$util$animate");var _animate2=_interopRequireDefault(require),defaultKey="rc_animate_"+Date.now();require=function(_React$Component){function Animate(props){(0,_classCallCheck3["default"])(this,Animate);var _this=(0,_possibleConstructorReturn3["default"])(this,(Animate.__proto__||Object.getPrototypeOf(Animate)).call(this,
props));_initialiseProps.call(_this);_this.currentlyAnimatingKeys={};_this.keysToEnter=[];_this.keysToLeave=[];_this.state={children:(0,_ChildrenUtils.toArrayChildren)(getChildrenFromProps(props))};_this.childrenRefs={};return _this}(0,_inherits3["default"])(Animate,_React$Component);(0,_createClass3["default"])(Animate,[{key:"componentDidMount",value:function(){var _this2=this,showProp=this.props.showProp,children=this.state.children;showProp&&(children=children.filter(function(child){return!!child.props[showProp]}));
children.forEach(function(child){child&&_this2.performAppear(child.key)})}},{key:"componentWillReceiveProps",value:function(nextProps){var _this3=this;this.nextProps=nextProps;var nextChildren=(0,_ChildrenUtils.toArrayChildren)(getChildrenFromProps(nextProps));nextProps=this.props;nextProps.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach(function(key){_this3.stop(key)});var showProp=nextProps.showProp,currentlyAnimatingKeys=this.currentlyAnimatingKeys,currentChildren=nextProps.exclusive?
(0,_ChildrenUtils.toArrayChildren)(getChildrenFromProps(nextProps)):this.state.children,newChildren=[];showProp?(currentChildren.forEach(function(currentChild){var nextChild=currentChild&&(0,_ChildrenUtils.findChildInChildrenByKey)(nextChildren,currentChild.key);(currentChild=nextChild&&nextChild.props[showProp]||!currentChild.props[showProp]?nextChild:_react2["default"].cloneElement(nextChild||currentChild,(0,_defineProperty3["default"])({},showProp,!0)))&&newChildren.push(currentChild)}),nextChildren.forEach(function(nextChild){nextChild&&
(0,_ChildrenUtils.findChildInChildrenByKey)(currentChildren,nextChild.key)||newChildren.push(nextChild)})):newChildren=(0,_ChildrenUtils.mergeChildren)(currentChildren,nextChildren);this.setState({children:newChildren});nextChildren.forEach(function(child){var key=child&&child.key;if(!child||!currentlyAnimatingKeys[key]){var hasPrev=child&&(0,_ChildrenUtils.findChildInChildrenByKey)(currentChildren,key);showProp?(child=child.props[showProp],hasPrev?!(0,_ChildrenUtils.findShownChildInChildrenByKey)(currentChildren,
key,showProp)&&child&&_this3.keysToEnter.push(key):child&&_this3.keysToEnter.push(key)):hasPrev||_this3.keysToEnter.push(key)}});currentChildren.forEach(function(child){var key=child&&child.key;if(!child||!currentlyAnimatingKeys[key]){var hasNext=child&&(0,_ChildrenUtils.findChildInChildrenByKey)(nextChildren,key);showProp?(child=child.props[showProp],hasNext?!(0,_ChildrenUtils.findShownChildInChildrenByKey)(nextChildren,key,showProp)&&child&&_this3.keysToLeave.push(key):child&&_this3.keysToLeave.push(key)):
hasNext||_this3.keysToLeave.push(key)}})}},{key:"componentDidUpdate",value:function(){var keysToEnter=this.keysToEnter;this.keysToEnter=[];keysToEnter.forEach(this.performEnter);keysToEnter=this.keysToLeave;this.keysToLeave=[];keysToEnter.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(currentChildren,key){var showProp=this.props.showProp;return showProp?(0,_ChildrenUtils.findShownChildInChildrenByKey)(currentChildren,key,showProp):(0,_ChildrenUtils.findChildInChildrenByKey)(currentChildren,
key)}},{key:"stop",value:function(key){delete this.currentlyAnimatingKeys[key];(key=this.childrenRefs[key])&&key.stop()}},{key:"render",value:function(){var _this4=this,props=this.props;this.nextProps=props;var stateChildren=this.state.children,children=null;stateChildren&&(children=stateChildren.map(function(child){if(null===child||void 0===child)return child;if(!child.key)throw Error("must set key for \x3crc-animate\x3e children");return _react2["default"].createElement(_AnimateChild2["default"],
{key:child.key,ref:function(node){_this4.childrenRefs[child.key]=node},animation:props.animation,transitionName:props.transitionName,transitionEnter:props.transitionEnter,transitionAppear:props.transitionAppear,transitionLeave:props.transitionLeave},child)}));if(stateChildren=props.component){var passedProps=props;"string"===typeof stateChildren&&(passedProps=(0,_extends3["default"])({className:props.className,style:props.style},props.componentProps));return _react2["default"].createElement(stateChildren,
passedProps,children)}return children[0]||null}}]);return Animate}(_react2["default"].Component);require.isAnimate=!0;require.propTypes={className:global["default"].string,style:global["default"].object,component:global["default"].any,componentProps:global["default"].object,animation:global["default"].object,transitionName:global["default"].oneOfType([global["default"].string,global["default"].object]),transitionEnter:global["default"].bool,transitionAppear:global["default"].bool,exclusive:global["default"].bool,
transitionLeave:global["default"].bool,onEnd:global["default"].func,onEnter:global["default"].func,onLeave:global["default"].func,onAppear:global["default"].func,showProp:global["default"].string,children:global["default"].node};require.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:noop,onEnter:noop,onLeave:noop,onAppear:noop};var _initialiseProps=function(){var _this5=this;this.performEnter=function(key){_this5.childrenRefs[key]&&
(_this5.currentlyAnimatingKeys[key]=!0,_this5.childrenRefs[key].componentWillEnter(_this5.handleDoneAdding.bind(_this5,key,"enter")))};this.performAppear=function(key){_this5.childrenRefs[key]&&(_this5.currentlyAnimatingKeys[key]=!0,_this5.childrenRefs[key].componentWillAppear(_this5.handleDoneAdding.bind(_this5,key,"appear")))};this.handleDoneAdding=function(key,type){var props=_this5.props;delete _this5.currentlyAnimatingKeys[key];if(!props.exclusive||props===_this5.nextProps){var currentChildren=
(0,_ChildrenUtils.toArrayChildren)(getChildrenFromProps(props));_this5.isValidChildByKey(currentChildren,key)?"appear"===type?_animate2["default"].allowAppearCallback(props)&&(props.onAppear(key),props.onEnd(key,!0)):_animate2["default"].allowEnterCallback(props)&&(props.onEnter(key),props.onEnd(key,!0)):_this5.performLeave(key)}};this.performLeave=function(key){_this5.childrenRefs[key]&&(_this5.currentlyAnimatingKeys[key]=!0,_this5.childrenRefs[key].componentWillLeave(_this5.handleDoneLeaving.bind(_this5,
key)))};this.handleDoneLeaving=function(key){var props=_this5.props;delete _this5.currentlyAnimatingKeys[key];if(!props.exclusive||props===_this5.nextProps){var currentChildren=(0,_ChildrenUtils.toArrayChildren)(getChildrenFromProps(props));if(_this5.isValidChildByKey(currentChildren,key))_this5.performEnter(key);else{var end=function(){_animate2["default"].allowLeaveCallback(props)&&(props.onLeave(key),props.onEnd(key,!1))};(0,_ChildrenUtils.isSameChildren)(_this5.state.children,currentChildren,
props.showProp)?end():_this5.setState({children:currentChildren},end)}}}};exports["default"]=(0,process["default"])(require);module.exports=exports["default"]}
//# sourceMappingURL=module$node_modules$rc_animate$lib$Animate.js.map
