shadow$provide.module$node_modules$rc_trigger$lib$index=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function noop(){}exports.__esModule=!0;global=require("module$node_modules$babel_runtime$helpers$extends");var _extends3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$classCallCheck");var _classCallCheck3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$possibleConstructorReturn");
var _possibleConstructorReturn3=_interopRequireDefault(global);global=require("module$node_modules$babel_runtime$helpers$inherits");var _inherits3=_interopRequireDefault(global);global=require("module$node_modules$react$index");var _react2=_interopRequireDefault(global);global=require("module$node_modules$prop_types$index");global=_interopRequireDefault(global);var _reactDom=require("module$node_modules$react_dom$index");process=require("module$node_modules$react_lifecycles_compat$react_lifecycles_compat_cjs");
shadow$shims=require("module$node_modules$rc_util$lib$Dom$contains");var _contains2=_interopRequireDefault(shadow$shims);shadow$shims=require("module$node_modules$rc_util$lib$Dom$addEventListener");var _addEventListener2=_interopRequireDefault(shadow$shims);shadow$shims=require("module$node_modules$rc_util$lib$ContainerRender");var _ContainerRender2=_interopRequireDefault(shadow$shims);shadow$shims=require("module$node_modules$rc_util$lib$Portal");var _Portal2=_interopRequireDefault(shadow$shims);
shadow$shims=require("module$node_modules$classnames$index");var _classnames2=_interopRequireDefault(shadow$shims),_utils=require("module$node_modules$rc_trigger$lib$utils");require=require("module$node_modules$rc_trigger$lib$Popup");var _Popup2=_interopRequireDefault(require),ALL_HANDLERS="onClick onMouseDown onTouchStart onMouseEnter onMouseLeave onFocus onBlur onContextMenu".split(" "),IS_REACT_16=!!_reactDom.createPortal;require={rcTrigger:global["default"].shape({onPopupMouseDown:global["default"].func})};
shadow$shims=function(_React$Component){function Trigger(props){(0,_classCallCheck3["default"])(this,Trigger);var _this=(0,_possibleConstructorReturn3["default"])(this,_React$Component.call(this,props));_initialiseProps.call(_this);var popupVisible=void 0;popupVisible="popupVisible"in props?!!props.popupVisible:!!props.defaultPopupVisible;_this.state={prevPopupVisible:popupVisible,popupVisible:popupVisible};ALL_HANDLERS.forEach(function(h){_this["fire"+h]=function(e){_this.fireEvents(h,e)}});return _this}
(0,_inherits3["default"])(Trigger,_React$Component);Trigger.prototype.getChildContext=function(){return{rcTrigger:{onPopupMouseDown:this.onPopupMouseDown}}};Trigger.prototype.componentDidMount=function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})};Trigger.prototype.componentDidUpdate=function(_,prevState){var props=this.props,state=this.state;IS_REACT_16||this.renderComponent(null,function(){prevState.popupVisible!==state.popupVisible&&props.afterPopupVisibleChange(state.popupVisible)});
state.popupVisible?(_=void 0,this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(_=props.getDocument(),this.clickOutsideHandler=(0,_addEventListener2["default"])(_,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(_=_||props.getDocument(),this.touchOutsideHandler=(0,_addEventListener2["default"])(_,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(_=_||props.getDocument(),this.contextMenuOutsideHandler1=(0,_addEventListener2["default"])(_,
"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=(0,_addEventListener2["default"])(window,"blur",this.onContextMenuClose))):this.clearOutsideHandler()};Trigger.prototype.componentWillUnmount=function(){this.clearDelayTimer();this.clearOutsideHandler();clearTimeout(this.mouseDownTimeout)};Trigger.getDerivedStateFromProps=function(_ref,prevState){_ref=_ref.popupVisible;var newState={};void 0!==_ref&&prevState.popupVisible!==
_ref&&(newState.popupVisible=_ref,newState.prevPopupVisible=prevState.popupVisible);return newState};Trigger.prototype.getPopupDomNode=function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null};Trigger.prototype.getPopupAlign=function(){var props=this.props,popupPlacement=props.popupPlacement,popupAlign=props.popupAlign;props=props.builtinPlacements;return popupPlacement&&props?(0,_utils.getAlignFromPlacement)(props,popupPlacement,popupAlign):popupAlign};
Trigger.prototype.setPopupVisible=function(popupVisible,event){var alignPoint=this.props.alignPoint,prevPopupVisible=this.state.popupVisible;this.clearDelayTimer();prevPopupVisible!==popupVisible&&("popupVisible"in this.props||this.setState({popupVisible:popupVisible,prevPopupVisible:prevPopupVisible}),this.props.onPopupVisibleChange(popupVisible));alignPoint&&event&&this.setPoint(event)};Trigger.prototype.delaySetPopupVisible=function(visible,delayS,event){var _this2=this;delayS*=1E3;this.clearDelayTimer();
if(delayS){var point=event?{pageX:event.pageX,pageY:event.pageY}:null;this.delayTimer=setTimeout(function(){_this2.setPopupVisible(visible,point);_this2.clearDelayTimer()},delayS)}else this.setPopupVisible(visible,event)};Trigger.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)};Trigger.prototype.clearOutsideHandler=function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null);this.contextMenuOutsideHandler1&&
(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null);this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null);this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)};Trigger.prototype.createTwoChains=function(event){var childPros=this.props.children.props,props=this.props;return childPros[event]&&props[event]?this["fire"+event]:childPros[event]||props[event]};Trigger.prototype.isClickToShow=
function(){var _props=this.props,showAction=_props.showAction;return-1!==_props.action.indexOf("click")||-1!==showAction.indexOf("click")};Trigger.prototype.isContextMenuToShow=function(){var _props2=this.props,showAction=_props2.showAction;return-1!==_props2.action.indexOf("contextMenu")||-1!==showAction.indexOf("contextMenu")};Trigger.prototype.isClickToHide=function(){var _props3=this.props,hideAction=_props3.hideAction;return-1!==_props3.action.indexOf("click")||-1!==hideAction.indexOf("click")};
Trigger.prototype.isMouseEnterToShow=function(){var _props4=this.props,showAction=_props4.showAction;return-1!==_props4.action.indexOf("hover")||-1!==showAction.indexOf("mouseEnter")};Trigger.prototype.isMouseLeaveToHide=function(){var _props5=this.props,hideAction=_props5.hideAction;return-1!==_props5.action.indexOf("hover")||-1!==hideAction.indexOf("mouseLeave")};Trigger.prototype.isFocusToShow=function(){var _props6=this.props,showAction=_props6.showAction;return-1!==_props6.action.indexOf("focus")||
-1!==showAction.indexOf("focus")};Trigger.prototype.isBlurToHide=function(){var _props7=this.props,hideAction=_props7.hideAction;return-1!==_props7.action.indexOf("focus")||-1!==hideAction.indexOf("blur")};Trigger.prototype.forcePopupAlign=function(){this.state.popupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()};Trigger.prototype.fireEvents=function(type,e){var childCallback=this.props.children.props[type];childCallback&&childCallback(e);(type=
this.props[type])&&type(e)};Trigger.prototype.close=function(){this.setPopupVisible(!1)};Trigger.prototype.render=function(){var _this3=this,popupVisible=this.state.popupVisible,_props8=this.props,forceRender=_props8.forceRender,alignPoint=_props8.alignPoint,className=_props8.className;_props8=_react2["default"].Children.only(_props8.children);var newChildProps={key:"trigger"};this.isContextMenuToShow()?newChildProps.onContextMenu=this.onContextMenu:newChildProps.onContextMenu=this.createTwoChains("onContextMenu");
this.isClickToHide()||this.isClickToShow()?(newChildProps.onClick=this.onClick,newChildProps.onMouseDown=this.onMouseDown,newChildProps.onTouchStart=this.onTouchStart):(newChildProps.onClick=this.createTwoChains("onClick"),newChildProps.onMouseDown=this.createTwoChains("onMouseDown"),newChildProps.onTouchStart=this.createTwoChains("onTouchStart"));this.isMouseEnterToShow()?(newChildProps.onMouseEnter=this.onMouseEnter,alignPoint&&(newChildProps.onMouseMove=this.onMouseMove)):newChildProps.onMouseEnter=
this.createTwoChains("onMouseEnter");this.isMouseLeaveToHide()?newChildProps.onMouseLeave=this.onMouseLeave:newChildProps.onMouseLeave=this.createTwoChains("onMouseLeave");this.isFocusToShow()||this.isBlurToHide()?(newChildProps.onFocus=this.onFocus,newChildProps.onBlur=this.onBlur):(newChildProps.onFocus=this.createTwoChains("onFocus"),newChildProps.onBlur=this.createTwoChains("onBlur"));if(alignPoint=(0,_classnames2["default"])(_props8&&_props8.props&&_props8.props.className,className))newChildProps.className=
alignPoint;var trigger=_react2["default"].cloneElement(_props8,newChildProps);if(!IS_REACT_16)return _react2["default"].createElement(_ContainerRender2["default"],{parent:this,visible:popupVisible,autoMount:!1,forceRender:forceRender,getComponent:this.getComponent,getContainer:this.getContainer},function(_ref2){_this3.renderComponent=_ref2.renderComponent;return trigger});alignPoint=void 0;if(popupVisible||this._component||forceRender)alignPoint=_react2["default"].createElement(_Portal2["default"],
{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent());return[trigger,alignPoint]};return Trigger}(_react2["default"].Component);shadow$shims.propTypes={children:global["default"].any,action:global["default"].oneOfType([global["default"].string,global["default"].arrayOf(global["default"].string)]),showAction:global["default"].any,hideAction:global["default"].any,getPopupClassNameFromAlign:global["default"].any,onPopupVisibleChange:global["default"].func,
afterPopupVisibleChange:global["default"].func,popup:global["default"].oneOfType([global["default"].node,global["default"].func]).isRequired,popupStyle:global["default"].object,prefixCls:global["default"].string,popupClassName:global["default"].string,className:global["default"].string,popupPlacement:global["default"].string,builtinPlacements:global["default"].object,popupTransitionName:global["default"].oneOfType([global["default"].string,global["default"].object]),popupAnimation:global["default"].any,
mouseEnterDelay:global["default"].number,mouseLeaveDelay:global["default"].number,zIndex:global["default"].number,focusDelay:global["default"].number,blurDelay:global["default"].number,getPopupContainer:global["default"].func,getDocument:global["default"].func,forceRender:global["default"].bool,destroyPopupOnHide:global["default"].bool,mask:global["default"].bool,maskClosable:global["default"].bool,onPopupAlign:global["default"].func,popupAlign:global["default"].object,popupVisible:global["default"].bool,
defaultPopupVisible:global["default"].bool,maskTransitionName:global["default"].oneOfType([global["default"].string,global["default"].object]),maskAnimation:global["default"].string,stretch:global["default"].string,alignPoint:global["default"].bool};shadow$shims.contextTypes=require;shadow$shims.childContextTypes=require;shadow$shims.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(){return window.document},onPopupVisibleChange:noop,afterPopupVisibleChange:noop,
onPopupAlign:noop,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]};var _initialiseProps=function(){var _this4=this;this.onMouseEnter=function(e){var mouseEnterDelay=_this4.props.mouseEnterDelay;_this4.fireEvents("onMouseEnter",e);_this4.delaySetPopupVisible(!0,mouseEnterDelay,mouseEnterDelay?null:e)};this.onMouseMove=function(e){_this4.fireEvents("onMouseMove",
e);_this4.setPoint(e)};this.onMouseLeave=function(e){_this4.fireEvents("onMouseLeave",e);_this4.delaySetPopupVisible(!1,_this4.props.mouseLeaveDelay)};this.onPopupMouseEnter=function(){_this4.clearDelayTimer()};this.onPopupMouseLeave=function(e){e.relatedTarget&&!e.relatedTarget.setTimeout&&_this4._component&&_this4._component.getPopupDomNode&&(0,_contains2["default"])(_this4._component.getPopupDomNode(),e.relatedTarget)||_this4.delaySetPopupVisible(!1,_this4.props.mouseLeaveDelay)};this.onFocus=
function(e){_this4.fireEvents("onFocus",e);_this4.clearDelayTimer();_this4.isFocusToShow()&&(_this4.focusTime=Date.now(),_this4.delaySetPopupVisible(!0,_this4.props.focusDelay))};this.onMouseDown=function(e){_this4.fireEvents("onMouseDown",e);_this4.preClickTime=Date.now()};this.onTouchStart=function(e){_this4.fireEvents("onTouchStart",e);_this4.preTouchTime=Date.now()};this.onBlur=function(e){_this4.fireEvents("onBlur",e);_this4.clearDelayTimer();_this4.isBlurToHide()&&_this4.delaySetPopupVisible(!1,
_this4.props.blurDelay)};this.onContextMenu=function(e){e.preventDefault();_this4.fireEvents("onContextMenu",e);_this4.setPopupVisible(!0,e)};this.onContextMenuClose=function(){_this4.isContextMenuToShow()&&_this4.close()};this.onClick=function(event){_this4.fireEvents("onClick",event);if(_this4.focusTime){var preTime=void 0;_this4.preClickTime&&_this4.preTouchTime?preTime=Math.min(_this4.preClickTime,_this4.preTouchTime):_this4.preClickTime?preTime=_this4.preClickTime:_this4.preTouchTime&&(preTime=
_this4.preTouchTime);if(20>Math.abs(preTime-_this4.focusTime))return;_this4.focusTime=0}_this4.preClickTime=0;_this4.preTouchTime=0;_this4.isClickToShow()&&(_this4.isClickToHide()||_this4.isBlurToHide())&&event&&event.preventDefault&&event.preventDefault();preTime=!_this4.state.popupVisible;(_this4.isClickToHide()&&!preTime||preTime&&_this4.isClickToShow())&&_this4.setPopupVisible(!_this4.state.popupVisible,event)};this.onPopupMouseDown=function(){var _context$rcTrigger=_this4.context.rcTrigger;_context$rcTrigger=
void 0===_context$rcTrigger?{}:_context$rcTrigger;_this4.hasPopupMouseDown=!0;clearTimeout(_this4.mouseDownTimeout);_this4.mouseDownTimeout=setTimeout(function(){_this4.hasPopupMouseDown=!1},0);_context$rcTrigger.onPopupMouseDown&&_context$rcTrigger.onPopupMouseDown.apply(_context$rcTrigger,arguments)};this.onDocumentClick=function(event){if(!_this4.props.mask||_this4.props.maskClosable){event=event.target;var root=(0,_reactDom.findDOMNode)(_this4);(0,_contains2["default"])(root,event)||_this4.hasPopupMouseDown||
_this4.close()}};this.getRootDomNode=function(){return(0,_reactDom.findDOMNode)(_this4)};this.getPopupClassNameFromAlign=function(align){var className=[],_props9=_this4.props,builtinPlacements=_props9.builtinPlacements,prefixCls=_props9.prefixCls,alignPoint=_props9.alignPoint,getPopupClassNameFromAlign=_props9.getPopupClassNameFromAlign;_props9.popupPlacement&&builtinPlacements&&className.push((0,_utils.getAlignPopupClassName)(builtinPlacements,prefixCls,align,alignPoint));getPopupClassNameFromAlign&&
className.push(getPopupClassNameFromAlign(align));return className.join(" ")};this.getComponent=function(){var _props10=_this4.props,prefixCls=_props10.prefixCls,destroyPopupOnHide=_props10.destroyPopupOnHide,popupClassName=_props10.popupClassName,action=_props10.action,onPopupAlign=_props10.onPopupAlign,popupAnimation=_props10.popupAnimation,popupTransitionName=_props10.popupTransitionName,popupStyle=_props10.popupStyle,mask=_props10.mask,maskAnimation=_props10.maskAnimation,maskTransitionName=_props10.maskTransitionName,
zIndex=_props10.zIndex,popup=_props10.popup,stretch=_props10.stretch;_props10=_props10.alignPoint;var _state=_this4.state,popupVisible=_state.popupVisible;_state=_state.point;var align=_this4.getPopupAlign(),mouseProps={};_this4.isMouseEnterToShow()&&(mouseProps.onMouseEnter=_this4.onPopupMouseEnter);_this4.isMouseLeaveToHide()&&(mouseProps.onMouseLeave=_this4.onPopupMouseLeave);mouseProps.onMouseDown=_this4.onPopupMouseDown;mouseProps.onTouchStart=_this4.onPopupMouseDown;return _react2["default"].createElement(_Popup2["default"],
(0,_extends3["default"])({prefixCls:prefixCls,destroyPopupOnHide:destroyPopupOnHide,visible:popupVisible,point:_props10&&_state,className:popupClassName,action:action,align:align,onAlign:onPopupAlign,animation:popupAnimation,getClassNameFromAlign:_this4.getPopupClassNameFromAlign},mouseProps,{stretch:stretch,getRootDomNode:_this4.getRootDomNode,style:popupStyle,mask:mask,zIndex:zIndex,transitionName:popupTransitionName,maskAnimation:maskAnimation,maskTransitionName:maskTransitionName,ref:_this4.savePopup}),
"function"===typeof popup?popup():popup)};this.getContainer=function(){var props=_this4.props,popupContainer=document.createElement("div");popupContainer.style.position="absolute";popupContainer.style.top="0";popupContainer.style.left="0";popupContainer.style.width="100%";(props.getPopupContainer?props.getPopupContainer((0,_reactDom.findDOMNode)(_this4)):props.getDocument().body).appendChild(popupContainer);return popupContainer};this.setPoint=function(point){_this4.props.alignPoint&&point&&_this4.setState({point:{pageX:point.pageX,
pageY:point.pageY}})};this.handlePortalUpdate=function(){_this4.state.prevPopupVisible!==_this4.state.popupVisible&&_this4.props.afterPopupVisibleChange(_this4.state.popupVisible)};this.savePopup=function(node){_this4._component=node}};(0,process.polyfill)(shadow$shims);exports["default"]=shadow$shims;module.exports=exports["default"]}
//# sourceMappingURL=module$node_modules$rc_trigger$lib$index.js.map
